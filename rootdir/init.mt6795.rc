import init.mt6795.usb.rc

on early-init
    mount debugfs /sys/kernel/debug /sys/kernel/debug mode=755

on init
   
    export LD_PRELOAD "libmtk_symbols.so"

    # Protect
    mkdir /protect_f 0771 system system
    mkdir /protect_s 0771 system system

on fs
    mount_all /fstab.mt6795

on late-fs
    # boot time fs tune
    write /sys/block/mmcblk0/queue/iostats 0
    write /sys/block/mmcblk0/queue/iosched/slice_idle 0
    write /sys/block/mmcblk0/queue/read_ahead_kb 2048
    write /sys/block/mmcblk0/queue/nr_requests 256

on post-fs
    # Internal storage
    symlink /sdcard /storage/sdcard0

    # Protect
    chown system system /protect_f
    chmod 0770 /protect_f

    chown system system /protect_s
    chmod 0770 /protect_s

    # Workaround for old blobs
    symlink /dev/block/platform/mtk-msdc.0/11230000.MSDC0/by-name /dev/block/platform/mtk-msdc.0/by-name

on post-fs-data
    # Create nvram folder for modem
    mkdir /data/nvram 0771 root system

    # Create for muxd pts device node to operate without root
    mkdir /dev/radio 0770 radio radio

    # GPS
    mkdir /data/gps_mnl 0771 gps system
    mkdir /data/misc/gps 0770 gps gps
    mkdir /data/agps_supl 0771 gps system
    chown gps gps /sys/class/gpsdrv/gps/pwrctl
    chown gps gps /sys/class/gpsdrv/gps/suspend
    chown gps gps /sys/class/gpsdrv/gps/state
    chown gps gps /sys/class/gpsdrv/gps/pwrsave
    chown gps gps /sys/class/gpsdrv/gps/status

    # Watch dog kicker
    write /proc/wdk "0 20 30"

    # Set ptmx group to non-root
    chown root radio /dev/ptmx

    # Set mlock limit to infinate (for m4u operation)
    setrlimit 8 -1 -1

    # Sensors
    chmod 0660 /dev/hwmsensor
    chmod 0660 /dev/gyroscope
    chmod 0660 /dev/gsensor
    chmod 0660 /dev/als_ps
    chown system system /dev/gyroscope
    chown system system /dev/hwmsensor
    chown system system /dev/gsensor
    chown system system /dev/als_ps

    chmod 0660 /sys/class/misc/m_acc_misc/accenablenodata
    chmod 0660 /sys/class/misc/m_acc_misc/accactive
    chmod 0660 /sys/class/misc/m_acc_misc/accdelay
    chmod 0660 /sys/class/misc/m_acc_misc/accbatch
    chmod 0660 /sys/class/misc/m_acc_misc/accflush
    chown system system /sys/class/misc/m_acc_misc/accenablenodata
    chown system system /sys/class/misc/m_acc_misc/accactive
    chown system system /sys/class/misc/m_acc_misc/accdelay
    chown system system /sys/class/misc/m_acc_misc/accbatch
    chown system system /sys/class/misc/m_acc_misc/accflush

    chmod 0660 /sys/class/misc/m_alsps_misc/alsactive
    chmod 0660 /sys/class/misc/m_alsps_misc/alsdelay
    chmod 0660 /sys/class/misc/m_alsps_misc/alsbatch
    chmod 0660 /sys/class/misc/m_alsps_misc/alsflush
    chmod 0660 /sys/class/misc/m_alsps_misc/psactive
    chmod 0660 /sys/class/misc/m_alsps_misc/psdelay
    chmod 0660 /sys/class/misc/m_alsps_misc/psbatch
    chmod 0660 /sys/class/misc/m_alsps_misc/psflush
    chown system system /sys/class/misc/m_alsps_misc/alsactive
    chown system system /sys/class/misc/m_alsps_misc/alsdelay
    chown system system /sys/class/misc/m_alsps_misc/alsbatch
    chown system system /sys/class/misc/m_alsps_misc/alsflush
    chown system system /sys/class/misc/m_alsps_misc/psactive
    chown system system /sys/class/misc/m_alsps_misc/psdelay
    chown system system /sys/class/misc/m_alsps_misc/psbatch
    chown system system /sys/class/misc/m_alsps_misc/psflush

    chmod 0660 /sys/class/misc/m_gyro_misc/gyroenablenodata
    chmod 0660 /sys/class/misc/m_gyro_misc/gyroactive
    chmod 0660 /sys/class/misc/m_gyro_misc/gyrodelay
    chmod 0660 /sys/class/misc/m_gyro_misc/gyrobatch
    chmod 0660 /sys/class/misc/m_gyro_misc/gyroflush
    chown system system /sys/class/misc/m_gyro_misc/gyroenablenodata
    chown system system /sys/class/misc/m_gyro_misc/gyroactive
    chown system system /sys/class/misc/m_gyro_misc/gyrodelay
    chown system system /sys/class/misc/m_gyro_misc/gyrobatch
    chown system system /sys/class/misc/m_gyro_misc/gyroflush

    chmod 0660 /sys/class/misc/m_uncali_gyro_misc/ungyroenablenodata
    chmod 0660 /sys/class/misc/m_uncali_gyro_misc/ungyroactive
    chmod 0660 /sys/class/misc/m_uncali_gyro_misc/ungyrodelay
    chmod 0660 /sys/class/misc/m_uncali_gyro_misc/ungyrobatch
    chmod 0660 /sys/class/misc/m_uncali_gyro_misc/ungyroflush
    chown system system /sys/class/misc/m_uncali_gyro_misc/ungyroenablenodata
    chown system system /sys/class/misc/m_uncali_gyro_misc/ungyroactive
    chown system system /sys/class/misc/m_uncali_gyro_misc/ungyrodelay
    chown system system /sys/class/misc/m_uncali_gyro_misc/ungyrobatch
    chown system system /sys/class/misc/m_uncali_gyro_misc/ungyroflush

    chmod 0660 /sys/class/misc/m_mag_misc/magactive
    chmod 0660 /sys/class/misc/m_mag_misc/magdelay
    chmod 0660 /sys/class/misc/m_mag_misc/magbatch
    chmod 0660 /sys/class/misc/m_mag_misc/magflush
    chmod 0660 /sys/class/misc/m_mag_misc/magoactive
    chmod 0660 /sys/class/misc/m_mag_misc/magodelay
    chmod 0660 /sys/class/misc/m_mag_misc/magobatch
    chmod 0660 /sys/class/misc/m_mag_misc/magoflush
    chown system system /sys/class/misc/m_mag_misc/magactive
    chown system system /sys/class/misc/m_mag_misc/magdelay
    chown system system /sys/class/misc/m_mag_misc/magbatch
    chown system system /sys/class/misc/m_mag_misc/magflush
    chown system system /sys/class/misc/m_mag_misc/magoactive
    chown system system /sys/class/misc/m_mag_misc/magodelay
    chown system system /sys/class/misc/m_mag_misc/magobatch
    chown system system /sys/class/misc/m_mag_misc/magoflush

	chmod 0660 /sys/class/misc/m_uncali_mag_misc/unmagenablenodata
    chmod 0660 /sys/class/misc/m_uncali_mag_misc/unmagactive
    chmod 0660 /sys/class/misc/m_uncali_mag_misc/unmagdelay
    chmod 0660 /sys/class/misc/m_uncali_mag_misc/unmagbatch
    chmod 0660 /sys/class/misc/m_uncali_mag_misc/unmagflush
    chown system system /sys/class/misc/m_uncali_mag_misc/unmagenablenodata
    chown system system /sys/class/misc/m_uncali_mag_misc/unmagactive
    chown system system /sys/class/misc/m_uncali_mag_misc/unmagdelay
    chown system system /sys/class/misc/m_uncali_mag_misc/unmagbatch
    chown system system /sys/class/misc/m_uncali_mag_misc/unmagflush

    chmod 0660 /sys/class/misc/m_step_c_misc/step_cenablenodata
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cactive
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cdelay
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cbatch
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cflush
    chown system system /sys/class/misc/m_step_c_misc/step_cenablenodata
    chown system system /sys/class/misc/m_step_c_misc/step_cactive
    chown system system /sys/class/misc/m_step_c_misc/step_cdelay
    chown system system /sys/class/misc/m_step_c_misc/step_cbatch
    chown system system /sys/class/misc/m_step_c_misc/step_cflush

    chmod 0660 /sys/class/misc/m_hmdy_misc/hmdyenablenodata
    chmod 0660 /sys/class/misc/m_hmdy_misc/hmdyactive
    chmod 0660 /sys/class/misc/m_hmdy_misc/hmdydelay
    chmod 0660 /sys/class/misc/m_hmdy_misc/hmdybatch
    chmod 0660 /sys/class/misc/m_hmdy_misc/hmdyflush

    chown system system /sys/class/misc/m_hmdy_misc/hmdyenablenodata
    chown system system /sys/class/misc/m_hmdy_misc/hmdyactive
    chown system system /sys/class/misc/m_hmdy_misc/hmdydelay
    chown system system /sys/class/misc/m_hmdy_misc/hmdybatch
    chown system system /sys/class/misc/m_hmdy_misc/hmdyflush

    chmod 0660 /sys/class/misc/m_pedo_misc/pedoactive
    chmod 0660 /sys/class/misc/m_pedo_misc/pedodelay
    chmod 0660 /sys/class/misc/m_pedo_misc/pedobatch
    chmod 0660 /sys/class/misc/m_pedo_misc/pedoflush
    chown system system /sys/class/misc/m_pedo_misc/pedoactive
    chown system system /sys/class/misc/m_pedo_misc/pedodelay
    chown system system /sys/class/misc/m_pedo_misc/pedobatch
    chown system system /sys/class/misc/m_pedo_misc/pedoflush

    chmod 0660 /sys/class/misc/m_pkup_misc/pkupactive
    chmod 0660 /sys/class/misc/m_pkup_misc/pkupdelay
    chmod 0660 /sys/class/misc/m_pkup_misc/pkupbatch
    chmod 0660 /sys/class/misc/m_pkup_misc/pkupflush
    chown system system /sys/class/misc/m_pkup_misc/pkupactive
    chown system system /sys/class/misc/m_pkup_misc/pkupdelay
    chown system system /sys/class/misc/m_pkup_misc/pkupbatch
    chown system system /sys/class/misc/m_pkup_misc/pkupflush

    chmod 0660 /sys/class/misc/m_tilt_misc/tiltactive
    chmod 0660 /sys/class/misc/m_tilt_misc/tiltdelay
    chmod 0660 /sys/class/misc/m_tilt_misc/tiltbatch
    chmod 0660 /sys/class/misc/m_tilt_misc/tiltflush
    chown system system /sys/class/misc/m_tilt_misc/tiltactive
    chown system system /sys/class/misc/m_tilt_misc/tiltdelay
    chown system system /sys/class/misc/m_tilt_misc/tiltbatch
    chown system system /sys/class/misc/m_tilt_misc/tiltflush

    chmod 0660 /sys/class/misc/m_glg_misc/glgactive
    chmod 0660 /sys/class/misc/m_glg_misc/glgdelay
    chmod 0660 /sys/class/misc/m_glg_misc/glgbatch
    chmod 0660 /sys/class/misc/m_glg_misc/glgflush
    chown system system /sys/class/misc/m_glg_misc/glgactive
    chown system system /sys/class/misc/m_glg_misc/glgdelay
    chown system system /sys/class/misc/m_glg_misc/glgbatch
    chown system system /sys/class/misc/m_glg_misc/glgflush

    chmod 0660 /sys/class/misc/m_wag_misc/wagactive
    chmod 0660 /sys/class/misc/m_wag_misc/wagdelay
    chmod 0660 /sys/class/misc/m_wag_misc/wagbatch
    chmod 0660 /sys/class/misc/m_wag_misc/wagflush
    chown system system /sys/class/misc/m_wag_misc/wagactive
    chown system system /sys/class/misc/m_wag_misc/wagdelay
    chown system system /sys/class/misc/m_wag_misc/wagbatch
    chown system system /sys/class/misc/m_wag_misc/wagflush

    chmod 0660 /sys/class/misc/m_ancall_misc/ancallactive
    chmod 0660 /sys/class/misc/m_ancall_misc/ancalldelay
    chmod 0660 /sys/class/misc/m_ancall_misc/ancallbatch
    chmod 0660 /sys/class/misc/m_ancall_misc/ancallflush
    chown system system /sys/class/misc/m_ancall_misc/ancallactive
    chown system system /sys/class/misc/m_ancall_misc/ancalldelay
    chown system system /sys/class/misc/m_ancall_misc/ancallbatch
    chown system system /sys/class/misc/m_ancall_misc/ancallflush

    chmod 0660 /sys/class/misc/m_ges_misc/gesactive
    chmod 0660 /sys/class/misc/m_ges_misc/gesdelay
    chmod 0660 /sys/class/misc/m_ges_misc/gesbatch
    chmod 0660 /sys/class/misc/m_ges_misc/gesflush
    chown system system /sys/class/misc/m_ges_misc/gesactive
    chown system system /sys/class/misc/m_ges_misc/gesdelay
    chown system system /sys/class/misc/m_ges_misc/gesbatch
    chown system system /sys/class/misc/m_ges_misc/gesflush
    chmod 0660 /sys/class/misc/m_pdr_misc/pdractive
    chmod 0660 /sys/class/misc/m_pdr_misc/pdrdelay
    chmod 0660 /sys/class/misc/m_pdr_misc/pdrbatch
    chmod 0660 /sys/class/misc/m_pdr_misc/pdrflush
    chown system system /sys/class/misc/m_pdr_misc/pdractive
    chown system system /sys/class/misc/m_pdr_misc/pdrdelay
    chown system system /sys/class/misc/m_pdr_misc/pdrbatch
    chown system system /sys/class/misc/m_pdr_misc/pdrflush

    chmod 0660 /sys/class/misc/m_act_misc/actactive
    chmod 0660 /sys/class/misc/m_act_misc/actdelay
    chmod 0660 /sys/class/misc/m_act_misc/actbatch
    chmod 0660 /sys/class/misc/m_act_misc/actflush
    chown system system /sys/class/misc/m_act_misc/actactive
    chown system system /sys/class/misc/m_act_misc/actdelay
    chown system system /sys/class/misc/m_act_misc/actbatch
    chown system system /sys/class/misc/m_act_misc/actflush

    chmod 0660 /sys/class/misc/m_step_c_misc/step_cactive
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cdelay
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cbatch
    chmod 0660 /sys/class/misc/m_step_c_misc/step_cflush
    chown system system /sys/class/misc/m_step_c_misc/step_cactive
    chown system system /sys/class/misc/m_step_c_misc/step_cdelay
    chown system system /sys/class/misc/m_step_c_misc/step_cbatch
    chown system system /sys/class/misc/m_step_c_misc/step_cflush

    chmod 0660 /sys/class/misc/m_rv_misc/rvactive
    chmod 0660 /sys/class/misc/m_rv_misc/rvdelay
    chmod 0660 /sys/class/misc/m_rv_misc/rvbatch
    chmod 0660 /sys/class/misc/m_rv_misc/rvflush
    chown system system /sys/class/misc/m_rv_misc/rvactive
    chown system system /sys/class/misc/m_rv_misc/rvdelay
    chown system system /sys/class/misc/m_rv_misc/rvbatch
    chown system system /sys/class/misc/m_rv_misc/rvflush

    chmod 0660 /sys/class/misc/m_grv_misc/grvactive
    chmod 0660 /sys/class/misc/m_grv_misc/grvdelay
    chmod 0660 /sys/class/misc/m_grv_misc/grvbatch
    chmod 0660 /sys/class/misc/m_grv_misc/grvflush
    chown system system /sys/class/misc/m_grv_misc/grvactive
    chown system system /sys/class/misc/m_grv_misc/grvdelay
    chown system system /sys/class/misc/m_grv_misc/grvbatch
    chown system system /sys/class/misc/m_grv_misc/grvflush

    chmod 0660 /sys/class/misc/m_gmrv_misc/gmrvactive
    chmod 0660 /sys/class/misc/m_gmrv_misc/gmrvdelay
    chmod 0660 /sys/class/misc/m_gmrv_misc/gmrvbatch
    chmod 0660 /sys/class/misc/m_gmrv_misc/gmrvflush
    chown system system /sys/class/misc/m_gmrv_misc/gmrvactive
    chown system system /sys/class/misc/m_gmrv_misc/gmrvdelay
    chown system system /sys/class/misc/m_gmrv_misc/gmrvbatch
    chown system system /sys/class/misc/m_gmrv_misc/gmrvflush

    chmod 0660 /sys/class/misc/m_la_misc/laactive
    chmod 0660 /sys/class/misc/m_la_misc/ladelay
    chmod 0660 /sys/class/misc/m_la_misc/labatch
    chmod 0660 /sys/class/misc/m_la_misc/laflush
    chown system system /sys/class/misc/m_la_misc/laactive
    chown system system /sys/class/misc/m_la_misc/ladelay
    chown system system /sys/class/misc/m_la_misc/labatch
    chown system system /sys/class/misc/m_la_misc/laflush

    chmod 0660 /sys/class/misc/m_grav_misc/gravactive
    chmod 0660 /sys/class/misc/m_grav_misc/gravdelay
    chmod 0660 /sys/class/misc/m_grav_misc/gravbatch
    chmod 0660 /sys/class/misc/m_grav_misc/gravflush
    chown system system /sys/class/misc/m_grav_misc/gravactive
    chown system system /sys/class/misc/m_grav_misc/gravdelay
    chown system system /sys/class/misc/m_grav_misc/gravbatch
    chown system system /sys/class/misc/m_grav_misc/gravflush

    chmod 0660 /sys/class/misc/m_rgbw_misc/rgbwactive
    chmod 0660 /sys/class/misc/m_rgbw_misc/rgbwdelay
    chmod 0660 /sys/class/misc/m_rgbw_misc/rgbwbatch
    chmod 0660 /sys/class/misc/m_rgbw_misc/rgbwflush
    chown system system /sys/class/misc/m_rgbw_misc/rgbwactive
    chown system system /sys/class/misc/m_rgbw_misc/rgbwdelay
    chown system system /sys/class/misc/m_rgbw_misc/rgbwbatch
    chown system system /sys/class/misc/m_rgbw_misc/rgbwflush

    chmod 0660 /sys/class/misc/m_bio_misc/bioactive
    chmod 0660 /sys/class/misc/m_bio_misc/biodelay
    chmod 0660 /sys/class/misc/m_bio_misc/biobatch
    chmod 0660 /sys/class/misc/m_bio_misc/bioflush
    chown system system /sys/class/misc/m_bio_misc/bioactive
    chown system system /sys/class/misc/m_bio_misc/biodelay
    chown system system /sys/class/misc/m_bio_misc/biobatch
    chown system system /sys/class/misc/m_bio_misc/bioflush

    # VideoCodec
    chmod 0666 /dev/Vcodec
    chown system media /dev/Vcodec

    chmod 0664 /proc/mcdi/sodi_en
    chown media /proc/mcdi/sodi_en

    # MJC
    chmod 0666 /dev/MJC
    chown system media /dev/MJC

    # Boot mode
    chmod 0666 /sys/class/BOOT/BOOT/boot/boot_mode
    chown system system /sys/class/BOOT/BOOT/boot/boot_mode

    # Graphic
    chmod 0660 /dev/mtk_disp_mgr
    chmod 0660 /dev/sw_sync
    chown system graphics /dev/mtk_disp_mgr
    chown system graphics /dev/sw_sync

    # Autok
    chown root system /sys/autok/debug
    chown root system /sys/autok/param_count
    chown root system /sys/autok/ready
    chown root system /sys/autok/ss_corner
    chown root system /sys/autok/suggest_vol
    chown root system /sys/autok/stage1/3/DONE
    chown root system /sys/autok/stage1/3/PARAMS
    chown root system /sys/autok/stage1/3/VOLTAGE
    chown root system /sys/autok/stage1/3/LOG
    chown root system /sys/autok/stage2/3

    # Device info /proc interface
    chmod 0666 /dev/devmap
    chown root system /dev/devmap

    # Camera
    chmod 0660 /dev/camera-fdvt
    chmod 0660 /dev/camera-isp
    chmod 0660 /dev/kd_camera_flashlight
    chmod 0660 /dev/kd_camera_hw
    chmod 0660 /dev/kd_camera_hw_bus2
    chmod 0660 /dev/CAM_CAL_DRV
    chmod 0660 /dev/DW9761BAF

    chown system camera /dev/camera-fdvt
    chown system camera /dev/camera-isp
    chown system camera /dev/kd_camera_flashlight
    chown system camera /dev/kd_camera_hw
    chown system camera /dev/kd_camera_hw_bus2
    chown system camera /dev/CAM_CAL_DRV
    chown system camera /dev/DW9761BAF

    # SMI
    chmod 0666 /dev/MTK_SMI
    chown system media /dev/MTK_SMI

    chmod 0666 /sys/bus/platform/drivers/mem_bw_ctrl/concurrency_scenario
    chown system media /sys/bus/platform/drivers/mem_bw_ctrl/concurrency_scenario

    # MTK_SCHED
    chmod 0660 /dev/mtk_sched
    chown system media /dev/mtk_sched

    # AGPS
    restorecon_recursive /data/misc/gps

    # BT/FM/GPS
    chmod 0660 /dev/ttyMT2
    chown system system /dev/ttyMT2

    # Thermal
    mkdir /data/.tp 0775 system system

    # Consumerir
    chmod 0660 /dev/consumerir
    chown system system /dev/consumerir

    # Modem related nodes
    mkdir /data/nvram/md 0770 root system
    mkdir /data/ccci_cfg 0770 system radio
    chown radio radio /sys/kernel/ccci/boot

    # Selinux
    restorecon /data/ccci_cfg
    restorecon_recursive /protect_f
    restorecon_recursive /protect_s

    # Ignore permission check
    write /data/ccci_cfg/md_new_ver.1 "flag"
    chmod 0660 /data/ccci_cfg/md_new_ver.1

    setprop vold.post_fs_data_done 1

    # Clear the sim switch flag
    setprop persist.radio.simswitch ""

on charger
    write /proc/hps/input_boost_enabled 0
    write /proc/hps/num_limit_low_battery 1
    write /proc/gpufreq/gpufreq_opp_max_freq 253500
    write /proc/cpufreq/cpufreq_limited_max_freq_by_user 403000
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "powersave"
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 403000

on boot
    # default is root radio 0440
    chmod 0644 /proc/cmdline

    # boot time tune
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/foreground/cpus 0-7
    write /dev/cpuset/foreground/boost/cpus 0-7
    write /dev/cpuset/background/cpus 0-7
    write /dev/cpuset/system-background/cpus 0-7

    write /proc/sys/vm/dirty_writeback_centisecs 300

    # Leds
    chown system system /sys/class/leds/red/brightness
    chown system system /sys/class/leds/red/trigger
    chown system system /sys/class/leds/green/brightness
    chown system system /sys/class/leds/green/trigger
    chown system system /sys/class/leds/blue/brightness
    chown system system /sys/class/leds/blue/trigger
    chown system system /sys/class/leds/yellow/brightness
    chown system system /sys/class/leds/yellow/trigger
    chown system system /sys/class/leds/white/brightness
    chown system system /sys/class/leds/white/trigger
    chown system system /sys/class/leds/cyan/brightness
    chown system system /sys/class/leds/cyan/trigger
    chown system system /sys/class/leds/violet/brightness
    chown system system /sys/class/leds/violet/trigger

    # RIL
    chown radio system /sys/power/vcorefs/pwr_ctrl

    # Perfservice
    chown system system /proc/hps/num_base_perf_serv
    chown system system /proc/hps/num_limit_power_serv
    chown system system /proc/cpufreq/cpufreq_limited_by_hevc
    chown system system /proc/cpufreq/cpufreq_limited_max_freq_by_user

    chown system system /d/ged/hal/total_gpu_freq_level_count
    chmod 0660 /d/ged/hal/total_gpu_freq_level_count
    chown system system /d/ged/hal/custom_boost_gpu_freq
    chmod 0660 /d/ged/hal/custom_boost_gpu_freq
    chown system system /d/ged/hal/custom_upbound_gpu_freq
    chmod 0660 /d/ged/hal/custom_upbound_gpu_freq

    # change default prebuilt kernel settings
    write /proc/gpufreq/gpufreq_input_boost 0
    write /proc/hps/input_boost_enabled 0
    write /proc/hps/rush_boost_enabled 0
    write /proc/hps/num_limit_thermal 4
    write /proc/hps/up_threshold 99
    write /proc/hps/down_threshold 87

    write /sys/devices/system/cpu/cpufreq/interactive/target_loads 99
    write /sys/devices/system/cpu/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpufreq/interactive/min_sample_time 10000
    write /sys/devices/system/cpu/cpufreq/interactive/above_hispeed_delay 10000
    write /sys/devices/system/cpu/cpufreq/interactive/timer_slack 40000

    write /sys/module/alarm_dev/parameters/debug_mask 0
    write /sys/module/alarmtimer/parameters/debug_mask 0
    write /sys/module/binder/parameters/debug_mask 0
    write /sys/module/earlysuspend/parameters/debug_mask 0
    write /sys/module/sbsuspend/parameters/sbsuspend_debug_mask 0
    write /sys/module/snd/parameters/debug 0
    write /sys/module/pvrsrvkm/parameters/gPVRDebugLevel 0
    write /sys/module/musb_hdrc/parameters/debug_level 0
    write /sys/module/lowmemorykiller/parameters/debug_level 0

    # WMT loader
    chown shell system /proc/driver/wmt_aee
    chown shell system /proc/driver/wmt_dbg

# Graphic
service guiext-server /vendor/bin/guiext-server
    class core
    user root
    group system graphics media

service pq /vendor/bin/pq
    class core
    user root
    group system graphics media camera
    oneshot

service pvrsrvctl /vendor/bin/pvrsrvctl --no-module --start
    class main
    user root
    group root
    oneshot

# WPA
service wpa_supplicant /vendor/bin/hw/wpa_supplicant \
    -iwlan0 -Dnl80211 -c/data/misc/wifi/wpa_supplicant.conf \
    -I/vendor/etc/wifi/wpa_supplicant_overlay.conf -N \
    -ip2p0 -Dnl80211 -c/data/misc/wifi/p2p_supplicant.conf -e/data/misc/wifi/entropy.bin \
    -I/vendor/etc/wifi/p2p_supplicant_overlay.conf \
    -O/data/misc/wifi/sockets -g@android:wpa_wlan0
    class main
    socket wpa_wlan0 dgram 660 wifi wifi
    disabled
    oneshot

# Modem
service conn_launcher /vendor/bin/6620_launcher -m 4 -p /system/etc/firmware/
    class core
    user system
    group system

service autokd /vendor/bin/autokd
    class core
    user system
    group system root

service ccci_fsd /vendor/bin/ccci_fsd 0
    class core
    user root
    group radio system
    oneshot

service ccci_mdinit /vendor/bin/ccci_mdinit 0
    class core
    user root
    group radio system
    oneshot

service gsm0710muxd /vendor/bin/gsm0710muxd -s /dev/ttyC0 -f 512 -n 8 -m basic
    class core
    user root
    group radio cache inet misc
    disabled
    oneshot

service muxreport /vendor/bin/muxreport
    class core
    user root
    group radio cache inet misc
    disabled
    oneshot

service nvram_daemon /vendor/bin/nvram_daemon
    class main
    user root
    group root system
    oneshot

service start_modem /vendor/bin/md_ctrl 1
    class main
    user radio
    group radio
    disabled
    oneshot

service stop_modem /vendor/bin/md_ctrl 0
    class main
    user radio
    group radio
    disabled
    oneshot

service wmt_loader /vendor/bin/wmt_loader
    class core
    user root
    group root system wifi
    oneshot

# Thermal
service thermal_manager /vendor/bin/thermal_manager
    class main
    user system
    group system
    oneshot

# Charging
service charger /charger
    class charger
    group system graphics
    seclabel u:r:healthd:s0

service fuelgauged /vendor/bin/fuelgauged
    class main
    user root
    group root system

# Accelerometer and gyroscope
service bmi160d /vendor/bin/bmi160d
    class main
    user system
    group system

# GPS
#service agpsd /vendor/bin/mtk_agpsd
#    class main
#    socket agpsd stream 660 gps system
#    socket agpsd2 stream 660 system inet
#    socket agpsd3 stream 660 system inet
#    user gps
#    group gps inet sdcard_r sdcard_rw misc radio system

#service wifi2agps /vendor/bin/wifi2agps
#    class main
#    user wifi
#    group gps inet

#service mnld /vendor/bin/mnld
#    class main
#    user gps
#    group gps inet misc sdcard_rw sdcard_r media_rw system
#    socket mnld stream 660 gps system

# Properties
on property:vold.decrypt=trigger_reset_main
    start stop_modem

on property:vold.decrypt=trigger_restart_min_framework
    start start_modem

on property:vold.decrypt=trigger_restart_framework
    start nvram_daemon
    start start_modem

on property:vold.decrypt=trigger_shutdown_framework
    start stop_modem

on property:ril.muxreport=1
    start muxreport

on property:sys.boot_completed=1
    # end boot time tune
    write /dev/cpuset/top-app/cpus 0-7
    write /dev/cpuset/foreground/cpus 0-5
    write /dev/cpuset/foreground/boost/cpus 0-5
    write /dev/cpuset/background/cpus 0-2
    write /dev/cpuset/system-background/cpus 0-3

    write /sys/block/mmcblk0/queue/iosched/slice_idle 10
    write /sys/block/mmcblk0/queue/read_ahead_kb 128
    write /sys/block/mmcblk0/queue/nr_requests 128
    write /sys/block/mmcblk0/queue/iostats 1
